<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: util.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: util.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Various utility functions.
 * @module util
 */


var fs   = require('fs');
var ip   = require('ip');
var path = require('path');

/**
 * Return true if the object has type 'undefined' or value 'null'.
 */
module.exports.isNullOrUndefined = function(object) {
    return object === undefined || object === null;
}

/**
 * Get the name of a module.
 * @param mod A reference to the module.
 * @return The name of the module, which is the filename minus the file extension.
 * @example getModuleName({filename: '/usr/src/module.js'}) ==> 'module'
 */
module.exports.getModuleName = function(mod) {
    return path.basename(mod.filename, path.extname(mod.filename));
}

/**
 * Get the qualified name of a function within a module.
 * @param mod A reference to the module the function resides in.
 * @param fun A reference to the function.
 * @return A string containing the name of the module and function in the format 'module.function'.
 * @example getFunctionName({filename: 'module.js'}, {name: 'foo'}) ==> 'module.foo'
 */
module.exports.getFunctionName = function(mod, fun) {
    return `${module.exports.getModuleName(mod)}.${fun.name}`;
}

/**
 * Iterate over a directory recursively.
 * @param dir The path to the directory.
 * @param callback A function called for each regular file contained in the directory or one of its
 * subdirectories.
 */
module.exports.walk = function(dir, callback) {
    fs.readdir(dir, (error, files) => {
        if (error) {
            throw error;
        }
        files.forEach((file) => {
            const filepath = path.join(dir, file);
            fs.stat(filepath, (error, stat) => {
                if (stat.isDirectory()) {
                    module.exports.walk(filepath, callback);
                } else if (stat.isFile()) {
                    callback(filepath);
                }
            });
        });
    });
}

/**
 * Get the server's local network IP address.
 */
module.exports.getLocalAddress = function() {
    return ip.address();
}

/**
 * Get the current UTC time as an ISO-formatted string.
 */
module.exports.getTimeStamp = function() {
    var d = new Date();
    return d.toISOString().replace('T', ' ').substr(0, 19);
}

module.exports.ServerError = class ServerError extends Error {
    constructor(message) {
        super(message);
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-api_controller.html">api/controller</a></li><li><a href="module-api_model.html">api/model</a></li><li><a href="module-api_routes.html">api/routes</a></li><li><a href="module-api_routes_index.html">api/routes/index</a></li><li><a href="module-api_routes_location_index.html">api/routes/location/index</a></li><li><a href="module-api_routes_location_list.html">api/routes/location/list</a></li><li><a href="module-api_routes_location_update.html">api/routes/location/update</a></li><li><a href="module-api_routes_postcode.html">api/routes/postcode</a></li><li><a href="module-api_routes_postcode_map.html">api/routes/postcode/map</a></li><li><a href="module-api_routes_postcode_reverse.html">api/routes/postcode/reverse</a></li><li><a href="module-api_routes_price_index.html">api/routes/price/index</a></li><li><a href="module-api_routes_price_map.html">api/routes/price/map</a></li><li><a href="module-database_mysql.html">database/mysql</a></li><li><a href="module-server.html">server</a></li><li><a href="module-server_config.html">server/config</a></li><li><a href="module-server_log.html">server/log</a></li><li><a href="module-util.html">util</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Dec 02 2017 13:32:56 GMT+0000 (GMT Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
